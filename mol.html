<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Modelos 3D - MUNDO 3D</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="mol.css">
</head>
<body>

<header class="header-fijo">
    <a href="f1.html" class="boton-volver">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
        </svg>
    </a>
    <h1 class="titulo-header" >Modelos 3D - MUNDO 3D</h1>

    <div class="cart-container">
        <button id="cart-button" class="boton-carrito">
            <svg viewBox="0 0 24 24" width="28" height="28" stroke="currentColor" stroke-width="2" fill="none">
                <circle cx="9" cy="21" r="2"/>
                <circle cx="20" cy="21" r="2"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <span id="cart-count" class="cart-count">0</span>
        </button>
    </div>
</header>


<main class="main-con-header">
    <section class="bienvenida">
        <p>Explorá nuestra galería de modelos 3D</p>
    </section>

    <section class="modelos-3d-section" id="modelos">
        <article class="galeria-modelos-3d" id="galeriaModelos3D"></article>
    </section>
</main>

<div id="modalModelo3D" class="modal-modelo-3d">
    <div class="modal-contenido">
        <div class="modal-encabezado">
            <h2 id="modalTituloModelo"></h2>
            <button class="cerrar-modal" onclick="cerrarModalModelo()">X</button>
        </div>
        <div class="modal-cuerpo">
            <div class="modal-imagen">
                <img id="modalImagenModelo" src="" alt="">
            </div>
            <div class="modal-info">
                <div class="precio-destacado">$<span id="modalPrecioModelo">0</span> ARS</div>
                <h3>Especificaciones de Impresión</h3>
                <ul id="modalEspecificaciones"></ul>
                <h3>Detalles del Modelo</h3>
                <ul id="modalDetalles"></ul>
                <button class="boton-agregar-modal" onclick="agregarAlCarritoDesdeModal()">
                    Agregar al Carrito
                </button>
            </div>
        </div>
    </div>
    <a href="mol.html" class="boton-volver">
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    Volver a Modelos 3D
</a>
</div>

<div id="modalCarrito" class="modal-modelo-3d">
    <div class="modal-contenido">
        <div class="modal-encabezado">
            <h2>Carrito de compras</h2>
            <button class="cerrar-modal" onclick="cerrarModalCarrito()">X</button>
        </div>
        <div class="modal-cuerpo carrito-cuerpo">
            <div id="cart-items-list" class="cart-items"></div>
            <div class="cart-total">
                <strong>Total: $<span id="cart-total-price">0</span> ARS</strong>
            </div>
            <button onclick="abrirCheckout()" style="display:block;width:100%;margin-top:12px;padding:14px;background:#006eff;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;">
    Proceder a Comprar
</button>
            <button class="boton-vaciar-carrito" onclick="vaciarCarrito()">Vaciar carrito</button>
        </div>
    </div>
</div>

<div id="modalCheckout" class="modal-modelo-3d">
    <div class="modal-contenido" style="max-width:500px;">
        <div class="modal-encabezado">
            <h2>Complete sus datos</h2>
            <button class="cerrar-modal" onclick="cerrarCheckout()">X</button>
        </div>
        <div class="modal-cuerpo" style="padding:25px;">
            <input type="text" id="inputNombre" placeholder="Nombre" required style="width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;">
            <input type="text" id="inputApellido" placeholder="Apellido" required style="width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;">
            <input type="text" id="inputTelefono" placeholder="Teléfono (ej: 1123456789)" required style="width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;">
            <input type="text" id="inputCP" placeholder="Código Postal" required style="width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;">
            <input type="text" id="inputLocalidad" placeholder="Localidad" required style="width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;">
            <button onclick="finalizarCompra()" style="width:100%;background:#006eff;color:white;padding:14px;border:none;border-radius:8px;margin-top:15px;font-size:1.1rem;cursor:pointer;">
                Confirmar Pedido
            </button>
        </div>
    </div>
</div>

<div id="modalHistorial" class="modal-modelo-3d">
    <div class="modal-contenido" style="max-width:900px;">
        <div class="modal-encabezado">
            <h2>Historial de Pedidos</h2>
<button class="cerrar-modal" onclick="document.getElementById('modalHistorial').classList.remove('abierto'); document.body.style.overflow = 'auto';">X</button>        </div>
        <div class="modal-cuerpo" style="padding:20px;">
            <div id="listaPedidos"></div>
        </div>
    </div>
</div>

<script>
let modeloActualEnModal = null;

const modelos3D = [
    {
        nombre: "Velador Luna Amarilla",
        precio: 22000,
        imagen: "lunaA.jpg",
        especificaciones: {
            "Tamaño": "17 x 17 x 20 cm",
            "Relleno": "15%",
            "Paredes": "1",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Velador",
        }
    },
    {
        nombre: "Velador Luna Blanca",
        precio: 22000,
        imagen: "lunaB.jpg",
        especificaciones: {
            "Tamaño": "17 x 17 x 20 cm",
            "Relleno": "15%",
            "Paredes": "1",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Velador",
        }
    },
    {
        nombre: "Velador Luna Roja",
        precio: 22000,
        imagen: "lunaR.jpg",
        especificaciones: {
            "Tamaño": "17 x 17 x 20 cm",
            "Relleno": "15%",
            "Paredes": "1",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Velador",
        }
    },
    {
        nombre: "Velador Luz Calida",
        precio: 18500,
        imagen: "portalA.jpg",
        especificaciones: {
            "Tamaño": "8 x 8 x 17 cm",
            "Relleno": "15%",
            "Paredes": "1",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Velador",
        }
    },
    {
        nombre: "Velador Luz Roja",
        precio: 18500,
        imagen: "portalR.jpg",
        especificaciones: {
            "Tamaño": "8 x 8 x 17 cm",
            "Relleno": "15%",
            "Paredes": "1",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Velador",
        }
    },
    {
        nombre: "Maceta Groot",
        precio: 13000,
        imagen: "groot.jpg",
        especificaciones: {
            "Tamaño": "17 x 14 x 20 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Maceta",
        }
    },
    {
        nombre: "Maceta Con Forma De Calavera",
        precio: 7000,
        imagen: "macetaC.jpg",
        especificaciones: {
            "Tamaño": "15 x 10 x 11 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Maceta Bolso",
        precio: 20000,
        imagen: "bolso.jpg",
        especificaciones: {
            "Tamaño": "30 x 30 x 35 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Maceta",
        }
    },
    {
        nombre: "Maceta David",
        precio: 12000,
        imagen: "david.jpg",
        especificaciones: {
            "Tamaño": "12 x 12 x 19 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Maceta",
        }
    },
    {
        nombre: "Maceta",
        precio: 10000,
        imagen: "macetaG.jpg",
        especificaciones: {
            "Tamaño": "11 x 14 x 15 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Maceta",
        }
    },
    {
        nombre: "Maceta",
        precio: 14000,
        imagen: "mace.jpg",
        especificaciones: {
            "Tamaño": " 15 x 15 x 16,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Maceta",
        }
    },
    {
        nombre: "Rosa Decorativa",
        precio: 4000,
        imagen: "rosa.jpg",
        especificaciones: {
            "Tamaño": "6 x 7 x 12 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Escultura",
        precio: 14000,
        imagen: "escul.jpg",
        especificaciones: {
            "Tamaño": "12 x 14 x 24 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Dorso Spiderman",
        precio: 16000,
        imagen: "spiderman.jpg",
        especificaciones: {
            "Tamaño": "14 x 12 x 20 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    
    {
        nombre: "Labubu",
        precio: 5000,
        imagen: "labubu.jpg",
        especificaciones: {
            "Tamaño": "7 x 6 x 13 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Accesorio",
        }
    }, 
    
    {
        nombre: "Roca Para Pecera",
        precio: 4000,
        imagen: "roca.jpg",
        especificaciones: {
            "Tamaño": "17 x 8 x 10 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Pulpo Flexible",
        precio: 3500,
        imagen: "pulpo.jpg",
        especificaciones: {
            "Tamaño": "8 x 8 x 11 cm",
            "Relleno": "25%",
            "Paredes": "3",
            "Material": "PETG"
        },
        detalles: {
            "Categoría": "Utilitarios",
        }
    },
    {
        nombre: "Muñeco Flexible",
        precio: 3500,
        imagen: "muñeco.jpg",
        especificaciones: {
            "Tamaño": "2 x 4 x 12 cm",
            "Relleno": "25%",
            "Paredes": "3",
            "Material": "PETG"
        },
        detalles: {
            "Categoría": "Utilitarios",
        }
    },
    {
        nombre: "Gato Flexible",
        precio: 4000,
        imagen: "gatoF.jpg",
        especificaciones: {
            "Tamaño": "30 x 2 x 1 cm",
            "Relleno": "25%",
            "Paredes": "3",
            "Material": "PETG"
        },
        detalles: {
            "Categoría": "Utilitarios",
        }
    },
    {
        nombre: "Set de Dragon Flexible",
        precio: 6500,
        imagen: "dragon.jpg",
        especificaciones: {
            "Tamaño": "15 x 4 x 3 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Furia Luminosa Flexible",
        precio: 3000,
        imagen: "furiaL.jpg",
        especificaciones: {
            "Tamaño": "12 x 13 x 2,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Furia Nocturna Flexible",
        precio: 3000,
        imagen: "furiaN.jpg",
        especificaciones: {
            "Tamaño": "12 x 13 x 2,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Cobra Flexible",
        precio: 5000,
        imagen: "cobra.jpg",
        especificaciones: {
            "Tamaño": "40 x 6 x 8 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Ajolote Articulado",
        precio: 5000,
        imagen: "ajolote.jpg",
        especificaciones: {
            "Tamaño": "40 x 6 x 8 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Corazon Flexible",
        precio: 4000,
        imagen: "coraF.jpg",
        especificaciones: {
            "Tamaño": "12 x 12 x 3 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Engranaje Con Forma De Corazon",
        precio: 6000,
        imagen: "coraE.jpg",
        especificaciones: {
            "Tamaño": " x  x  cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Juguetes",
        }
    },
    {
        nombre: "Chimuelo 2D", 
        precio: 3500,
        imagen: "2dchimu.jpg",
        especificaciones: {
            "Tamaño": "20 x 17 x 1,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Cuadro 2D-Decoracion",
        }
    },
    {
        nombre: "Arbol 2D",
        precio: 4500,
        imagen: "arbol.jpg",
        especificaciones: {
            "Tamaño": "20 x 20 x 1,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Cuadro 2D-Decoracion",
        }
    },
    {
        nombre: "Corazon 2D",
        precio: 25000,
        imagen: "decoracionC.jpg",
        especificaciones: {
            "Tamaño": "???cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Ave 2D",
        precio: 4500,
        imagen: "ave.jpg",
        especificaciones: {
            "Tamaño": "20 x 20 x 1,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Cuadro 2D-Decoracion",
        }
    },
    {
        nombre: "Colibri 2D",
        precio: 9500,
        imagen: "coli2d.jpg",
        especificaciones: {
            "Tamaño": "40 x 40 x 5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Cuadro 2D-Decoracion",
        }
    },
        {
        nombre: "Hada 2D",
        precio: 9500,
        imagen: "hada.jpg",
        especificaciones: {
            "Tamaño": "40 x 40 x 5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Cuadro 2D-Decoracion",
        }
    },
    {
        nombre: "Set de Mariposa",
        precio: 6500,
        imagen: "mariposa.jpg",
        especificaciones: {
            "Tamaño": "15 x 12 x 1 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Cuadro 2D-Decoracion",
        }
    },
    {
        nombre: "Llaveros de Futbol C/U",
        precio: 2000,
        imagen: "cuadros.jpg",
        especificaciones: {
            "Tamaño": "5 x 5 x 1 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Accesorio",
        }
    },
    {
        nombre: "Llavero Cjs",
        precio: 2000,
        imagen: "cjs.jpg",
        especificaciones: {
            "Tamaño": "5 x 5 x 1 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Utilitarios",
        }
    },
        {
        nombre: "Flor Tejida",
        precio: 5500,
        imagen: "flor.jpg",
        especificaciones: {
            "Tamaño": "10 x 8 x 15 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Decoracion",
            "Textura": "Tejido"
        }
    },
    {
        nombre: "GhostFace Tejido",
        precio: 8000,
        imagen: "scary.jpg",
        especificaciones: {
            "Tamaño": " 5 x 6 x 10 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Gato Tejido",
        precio: 4000
        ,
        imagen: "catT.jpg",
        especificaciones: {
            "Tamaño": " x  x  cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Set de Ajedrez",
        precio: 7000,
        imagen: "ajedr.jpg",
        especificaciones: {
            "Tamaño": "2 x 2 x 7 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Juego de Mesa",
        }
    },
    {
        nombre: "Llavero Hello Kity",
        precio: 2000,
        imagen: "hello2d.jpg",
        especificaciones: {
            "Tamaño": "6 x 5 x 1 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Accesorio",
        }
    },
    {
        nombre: "Jabonera Nº1",
        precio: 6000,
        imagen: "jabonera.jpg",
        especificaciones: {
            "Tamaño": "14 x 8,5 x 3 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Jabonera Nº2",
        precio: 4500,
        imagen: "jabo.jpg",
        especificaciones: {
            "Tamaño": " 8 x 16 x 2 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Soporte de cable para 27 mm",
        precio: 4000,
        imagen: "soporteC.jpg",
        especificaciones: {
            "Tamaño": "4 x 1 x 1 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Utilitario",
        }
    },
    {
        nombre: "Decoracion Navideña Nº1",
        precio: 2500,
        imagen: "reno.jpg",
        especificaciones: {
            "Tamaño": "5 x 5 x 10  cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Decoracion Navideña Nº2",
        precio: 1500,
        imagen: "navi.jpg",
        especificaciones: {
            "Tamaño": "4 x 4 x 4 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Decoracion Navideña Nº3",
        precio: 13000,
        imagen: "arbolD.jpg",
        especificaciones: {
            "Tamaño": " 10 x 10 x 27 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Vela Derretida",
        precio: 2500,
        imagen: "velaF.jpg",
        especificaciones: {
            "Tamaño": "4 x 4 x 9 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Vela Decorativa",
        precio: 12500,
        imagen: "vela.jpg",
        especificaciones: {
            "Tamaño": "19 x 19 x 12 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Cubo Infinito",
        precio: 5500,
        imagen: "cuboI.jpg",
        especificaciones: {
            "Tamaño": "11 x 11 x 11 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Portalapices ",
        precio: 9000,
        imagen: "lapices.jpg",
        especificaciones: {
            "Tamaño": "15 x 10 x 14 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Utilitario-Decoracion",
        }
    },
    {
        nombre: "Porta Auriculares Batman",
        precio: 11000,
        imagen: "batman.jpg",
        especificaciones: {
            "Tamaño": " 11 x 15 x 22 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Portasaumerio Espartano",
        precio: 12500,
        imagen: "portasaumerio.jpg",
        especificaciones: {
            "Tamaño": "31 x 7.5 x 16 cm",
            "Relleno": "25%",
            "Paredes": "3",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Porta Vasos Nº1",
        precio: 1500,
        imagen: "portaV.jpg",
        especificaciones: {
            "Tamaño": " 10 x 8,5 x 0,5 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Portacelular Gato",
        precio: 2500,
        imagen: "portagato.jpg",
        especificaciones: {
            "Tamaño": "8 x 5 x 6 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA"
        },
        detalles: {
            "Categoría": "Utilitario-Decoracion",
        }
    },
    {
        nombre: "Soporte Para Pinceles",
        precio: 8500,
        imagen: "soporteP.jpg",
        especificaciones: {
            "Tamaño": " 20 x 10 x 7 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    {
        nombre: "Organizador Para Cocina",
        precio: 15000,
        imagen: "organizador.jpg",
        especificaciones: {
            "Tamaño": " 17 x 17 x 26 cm",
            "Relleno": "20%",
            "Paredes": "2",
            "Material": "PLA",
        },
        detalles: {
            "Categoría": "Decoracion",
        }
    },
    
    
    
    
];

function cargarGaleriaModelos3D() {
    const cont = document.getElementById('galeriaModelos3D');
    cont.innerHTML = '';
    modelos3D.forEach((m, i) => {
        const card = document.createElement('div');
        card.className = 'modelo-3d-card';
        card.onclick = () => abrirModalModelo(i);
        card.innerHTML = `<img src="${m.imagen}" alt="${m.nombre}"><h3>${m.nombre}</h3><p class="precio">$${m.precio} ARS</p>`;
        cont.appendChild(card);
    });
}

function abrirModalModelo(i) {
    modeloActualEnModal = i;
    const m = modelos3D[i];
    document.getElementById('modalTituloModelo').textContent = m.nombre;
    document.getElementById('modalImagenModelo').src = m.imagen;
    document.getElementById('modalPrecioModelo').textContent = m.precio;
    const specs = document.getElementById('modalEspecificaciones'); specs.innerHTML = '';
    for (const [k, v] of Object.entries(m.especificaciones)) {
        specs.innerHTML += `<li><strong>${k}:</strong> ${v}</li>`;
    }
    const det = document.getElementById('modalDetalles'); det.innerHTML = '';
    for (const [k, v] of Object.entries(m.detalles)) {
        det.innerHTML += `<li><strong>${k}:</strong> ${v}</li>`;
    }
    document.getElementById('modalModelo3D').classList.add('abierto');
    document.body.style.overflow = 'hidden';
}

function cerrarModalModelo() {
    document.getElementById('modalModelo3D').classList.remove('abierto');
    document.body.style.overflow = 'auto';
}

// === CARRITO ===
function actualizarContadorCarrito() {
    const carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    document.getElementById('cart-count').textContent = carrito.length;
}

function abrirModalCarrito() {
    const carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    const lista = document.getElementById('cart-items-list');
    lista.innerHTML = '';
    let total = 0;
    if (carrito.length === 0) {
        lista.innerHTML = '<p style="text-align:center;color:#777;margin:20px 0">El carrito está vacío</p>';
    } else {
        carrito.forEach((item, i) => {
            total += item.precio;
            const div = document.createElement('div');
            div.className = 'cart-item';
            div.innerHTML = `<h4>${item.nombre}</h4><div><p>$${item.precio} ARS</p><button onclick="removerDelCarrito(${i})">Eliminar</button></div>`;
            lista.appendChild(div);
        });
    }
    document.getElementById('cart-total-price').textContent = total;
    document.getElementById('modalCarrito').classList.add('abierto');
    document.body.style.overflow = 'hidden';
}

function cerrarModalCarrito() {
    document.getElementById('modalCarrito').classList.remove('abierto');
    document.body.style.overflow = 'auto';
}

function removerDelCarrito(i) {
    let carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    carrito.splice(i, 1);
    localStorage.setItem('carrito', JSON.stringify(carrito));
    actualizarContadorCarrito();
    abrirModalCarrito();
}

function vaciarCarrito() {
    if (confirm('¿Vaciar todo el carrito?')) {
        localStorage.removeItem('carrito');
        actualizarContadorCarrito();
        abrirModalCarrito();
    }
}

function agregarAlCarritoDesdeModal() {
    if (modeloActualEnModal === null) return;
    const m = modelos3D[modeloActualEnModal];
    let carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    carrito.push({ nombre: m.nombre, precio: m.precio, imagen: m.imagen });
    localStorage.setItem('carrito', JSON.stringify(carrito));
    alert(m.nombre + ' agregado al carrito');
    cerrarModalModelo();
    actualizarContadorCarrito();
}

// === CHECKOUT Y GUARDADO DE PEDIDO ===
function abrirCheckout() {
    const carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    if (carrito.length === 0) {
        alert('El carrito está vacío');
        return;
    }
    cerrarModalCarrito();
    document.getElementById('modalCheckout').classList.add('abierto');
    document.body.style.overflow = 'hidden';
}

function cerrarCheckout() {
    document.getElementById('modalCheckout').classList.remove('abierto');
    document.body.style.overflow = 'auto';
}

function finalizarCompra() {
    const nombre = document.getElementById('inputNombre').value.trim();
    const apellido = document.getElementById('inputApellido').value.trim();
    const telefono = document.getElementById('inputTelefono').value.trim();
    const cp = document.getElementById('inputCP').value.trim();
    const localidad = document.getElementById('inputLocalidad').value.trim();

    if (!nombre || !apellido || !telefono || !cp || !localidad) {
        alert('Complete todos los campos');
        return;
    }

    const carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    const total = carrito.reduce((sum, item) => sum + item.precio, 0);

    const pedido = {
        id: Date.now(),
        fecha: new Date().toLocaleString('es-AR'),
        cliente: { nombre, apellido, telefono, cp, localidad },
        productos: carrito,
        total: total
    };

    let historial = JSON.parse(localStorage.getItem('historialPedidos') || '[]');
    historial.push(pedido);
    localStorage.setItem('historialPedidos', JSON.stringify(historial));
    localStorage.removeItem('carrito');

    alert('¡Pedido confirmado! Gracias ' + nombre);
    cerrarCheckout();
    actualizarContadorCarrito();
}

// === ACCESO ADMIN: escribir 080303 + Enter ===
let codigoIngresado = '';

document.addEventListener('keydown', (e) => {
    if (e.key >= '0' && e.key <= '9') {
        codigoIngresado += e.key;
    } else if (e.key === 'Backspace') {
        codigoIngresado = codigoIngresado.slice(0, -1);
    } else if (e.key === 'Enter' && codigoIngresado === '080308') {
        document.getElementById('modalHistorial').classList.add('abierto');
        document.body.style.overflow = 'hidden';
        mostrarHistorial();
        codigoIngresado = '';
    } else {
        codigoIngresado = '';
    }
});

function mostrarHistorial() {
    const historial = JSON.parse(localStorage.getItem('historialPedidos') || '[]');
    const cont = document.getElementById('listaPedidos');
    cont.innerHTML = '';

    if (historial.length === 0) {
        cont.innerHTML = '<p style="text-align:center;color:#777;">No hay pedidos aún</p>';
        return;
    }

    historial.forEach(p => {
        const div = document.createElement('div');
        div.style = 'background:white;margin:15px 0;padding:18px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);cursor:pointer;';

        div.innerHTML = `
            <div style="display:flex;justify-content:space-between;align-items:center;">
                <strong style="font-size:1.2rem;">${p.cliente.nombre} ${p.cliente.apellido}</strong>
                <small style="color:#555;">${p.fecha}</small>
            </div>
            <p style="margin:8px 0;color:#333;">
                Tel: ${p.cliente.telefono} • ${p.cliente.localidad} (${p.cliente.cp})
            </p>
            <p style="margin:5px 0;font-weight:bold;color:#006eff;">
                Total: $${p.total} ARS • ${p.productos.length} producto(s)
            </p>
        `;

        div.onclick = (e) => {
            if (e.target.tagName === 'BUTTON' || e.target.tagName === 'STRONG') return;

            const detalles = div.querySelector('.detalles');
            if (detalles) {
                detalles.remove();
                return;
            }

            const lista = document.createElement('div');
            lista.className = 'detalles';
            lista.style = 'margin-top:15px;padding:15px;background:#f8f9fa;border-radius:8px;border-left:4px solid #006eff;';

            let html = '<strong style="color:#170942;">Productos:</strong><br><br>';
            p.productos.forEach((pr, idx) => {
                const indice = modelos3D.findIndex(m => m.nombre === pr.nombre);
                if (indice !== -1) {
                    html += `${idx + 1}. <strong style="color:#006eff;cursor:pointer;text-decoration:underline;" 
                                    onclick="event.stopPropagation(); modeloActualEnModal=${indice}; abrirModalModelo(${indice}); document.getElementById('modalHistorial').classList.remove('abierto'); document.body.style.overflow='hidden';">
                                    ${pr.nombre}</strong> — $${pr.precio} ARS<br>`;
                } else {
                    html += `${idx + 1}. <strong>${pr.nombre}</strong> — $${pr.precio} ARS<br>`;
                }
            });

            lista.innerHTML = html;

            const botonEliminar = document.createElement('button');
            botonEliminar.textContent = 'Eliminar este pedido';
            botonEliminar.style = 'margin-top:15px;background:#e74c3c;color:white;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:bold;';
            botonEliminar.onclick = (e) => {
                e.stopPropagation();
                if (confirm('¿Eliminar este pedido permanentemente?')) {
                    eliminarPedido(p.id);
                }
            };

            lista.appendChild(botonEliminar);
            div.appendChild(lista);
        };

        cont.appendChild(div);
    });
}

function eliminarPedido(id) {
    if (confirm('¿Eliminar este pedido permanentemente?')) {
        let historial = JSON.parse(localStorage.getItem('historialPedidos') || '[]');
        historial = historial.filter(p => p.id !== id);
        localStorage.setItem('historialPedidos', JSON.stringify(historial));
        mostrarHistorial();
    }
}

document.addEventListener('DOMContentLoaded', () => {
    cargarGaleriaModelos3D();
    actualizarContadorCarrito();
    document.getElementById('cart-button').addEventListener('click', abrirModalCarrito);
});
</script>

</body>
</html>
